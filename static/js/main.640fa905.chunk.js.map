{"version":3,"sources":["RecommendationCard.js","App.js","index.js"],"names":["styles","card","width","margin","textAlign","border","padding","borderRadius","backgroundColor","imageContainer","height","marginBottom","display","justifyContent","image","maxHeight","maxWidth","title","buttonContainer","buttonRed","color","flex","cursor","buttonYellow","buttonGreen","finalRecommendation","marginTop","recommendationList","listStyleType","recommendationItem","recommendationImage","RecommendationCard","currentItem","setCurrentItem","useState","ratedItemsCount","setRatedItemsCount","finalRecommendations","setFinalRecommendations","useEffect","fetchNextItem","sessionId","localStorage","getItem","axios","get","params","session_id","then","response","data","catch","error","console","handleResponse","ratingValue","post","item","id","rating","prevCount","newCount","fetchFinalRecommendation","getImageUrl","image_url","length","React","createElement","style","map","key","src","alt","onClick","App","uuidv4","setItem","className","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.640fa905.chunk.js","sourcesContent":["// src/RecommendationCard.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction RecommendationCard() {\r\n  const [currentItem, setCurrentItem] = useState(null);\r\n  const [ratedItemsCount, setRatedItemsCount] = useState(0);\r\n  const [finalRecommendations, setFinalRecommendations] = useState([]);\r\n  const maxRatings = 5; // Number of items the user needs to rate before getting a recommendation\r\n\r\n  useEffect(() => {\r\n    fetchNextItem();\r\n  }, []);\r\n\r\n  const fetchNextItem = () => {\r\n    const sessionId = localStorage.getItem('sessionId');\r\n    axios\r\n      .get('http://127.0.0.1:8000/api/next-item/', {\r\n        params: { session_id: sessionId },\r\n      })\r\n      .then((response) => {\r\n        setCurrentItem(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching item:', error);\r\n      });\r\n  };\r\n\r\n  const handleResponse = (ratingValue) => {\r\n    if (!currentItem) return;\r\n\r\n    const sessionId = localStorage.getItem('sessionId');\r\n\r\n    axios\r\n      .post('http://127.0.0.1:8000/api/rate/', {\r\n        item: currentItem.id,\r\n        rating: ratingValue,\r\n        session_id: sessionId,\r\n      })\r\n      .then((response) => {\r\n        setRatedItemsCount((prevCount) => {\r\n          const newCount = prevCount + 1;\r\n          if (newCount >= maxRatings) {\r\n            // Fetch final recommendation\r\n            fetchFinalRecommendation(sessionId);\r\n          } else {\r\n            // Move to the next item after recording the response\r\n            fetchNextItem();\r\n          }\r\n          return newCount;\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error submitting rating:', error);\r\n      });\r\n  };\r\n\r\n  const fetchFinalRecommendation = (sessionId) => {\r\n    axios\r\n      .get('http://127.0.0.1:8000/api/final-recommendation/', {\r\n        params: { session_id: sessionId },\r\n      })\r\n      .then((response) => {\r\n        setFinalRecommendations(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching final recommendation:', error);\r\n      });\r\n  };\r\n\r\n  const getImageUrl = (item) => {\r\n    if (item.image) {\r\n      return `http://127.0.0.1:8000${item.image}`;\r\n    } else if (item.image_url) {\r\n      return item.image_url;\r\n    } else {\r\n      return ''; // or a placeholder image URL\r\n    }\r\n  };\r\n\r\n  if (finalRecommendations.length > 0) {\r\n    return (\r\n      <div style={styles.finalRecommendation}>\r\n        <h2>We recommend these movies for you:</h2>\r\n        <ul style={styles.recommendationList}>\r\n          {finalRecommendations.map((item) => (\r\n            <li key={item.id} style={styles.recommendationItem}>\r\n              <h3>{item.title}</h3>\r\n              {getImageUrl(item) && (\r\n                <img\r\n                  src={getImageUrl(item)}\r\n                  alt={item.title}\r\n                  style={styles.recommendationImage}\r\n                />\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentItem) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={styles.card}>\r\n      <div style={styles.imageContainer}>\r\n        {getImageUrl(currentItem) && (\r\n          <img\r\n            src={getImageUrl(currentItem)}\r\n            alt={currentItem.title}\r\n            style={styles.image}\r\n          />\r\n        )}\r\n      </div>\r\n      <div style={styles.title}>\r\n        <h2>{currentItem.title}</h2>\r\n      </div>\r\n      <div style={styles.buttonContainer}>\r\n        <button style={styles.buttonRed} onClick={() => handleResponse(1)}>\r\n          I don't recommend\r\n        </button>\r\n        <button style={styles.buttonYellow} onClick={() => handleResponse(3)}>\r\n          Don't know\r\n        </button>\r\n        <button style={styles.buttonGreen} onClick={() => handleResponse(5)}>\r\n          I recommend\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  card: {\r\n    width: '400px',\r\n    margin: '50px auto',\r\n    textAlign: 'center',\r\n    border: '1px solid #ddd',\r\n    padding: '20px',\r\n    borderRadius: '10px',\r\n    backgroundColor: '#fff',\r\n  },\r\n  imageContainer: {\r\n    height: '300px',\r\n    marginBottom: '20px',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  },\r\n  image: {\r\n    maxHeight: '100%',\r\n    maxWidth: '100%',\r\n    borderRadius: '10px',\r\n  },\r\n  title: {\r\n    marginBottom: '20px',\r\n  },\r\n  buttonContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  buttonRed: {\r\n    backgroundColor: 'red',\r\n    color: 'white',\r\n    flex: 1,\r\n    margin: '0 5px',\r\n    padding: '15px',\r\n    border: 'none',\r\n    borderRadius: '5px',\r\n    cursor: 'pointer',\r\n  },\r\n  buttonYellow: {\r\n    backgroundColor: 'yellow',\r\n    color: 'black',\r\n    flex: 1,\r\n    margin: '0 5px',\r\n    padding: '15px',\r\n    border: 'none',\r\n    borderRadius: '5px',\r\n    cursor: 'pointer',\r\n  },\r\n  buttonGreen: {\r\n    backgroundColor: 'green',\r\n    color: 'white',\r\n    flex: 1,\r\n    margin: '0 5px',\r\n    padding: '15px',\r\n    border: 'none',\r\n    borderRadius: '5px',\r\n    cursor: 'pointer',\r\n  },\r\n  finalRecommendation: {\r\n    textAlign: 'center',\r\n    marginTop: '50px',\r\n  },\r\n  recommendationList: {\r\n    listStyleType: 'none',\r\n    padding: 0,\r\n  },\r\n  recommendationItem: {\r\n    marginBottom: '20px',\r\n  },\r\n  recommendationImage: {\r\n    maxWidth: '200px',\r\n    borderRadius: '10px',\r\n  },\r\n};\r\n\r\nexport default RecommendationCard;\r\n","// src/App.js\n\nimport React, { useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport RecommendationCard from './RecommendationCard';\n\nfunction App() {\n  useEffect(() => {\n    let sessionId = localStorage.getItem('sessionId');\n    if (!sessionId) {\n      sessionId = uuidv4();\n      localStorage.setItem('sessionId', sessionId);\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <h1>Welcome to the Recommendation System</h1>\n      <RecommendationCard />\n    </div>\n  );\n}\n\nexport default App;\n","// src/index.js\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}